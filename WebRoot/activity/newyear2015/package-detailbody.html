<script type="text/javascript">
	<s:if test="#request.noPack==1">
		location.href="${basePath}/activity/newyear2015/activity.html";
	</s:if>
</script>

<div class="activity-body">
	<div class="activity-statu-split"></div>

	<div class="cardetail-area">
		<div class="title"></div>
		
		<div class="car-img-cont img-bkky">
			<div class="car-tag">别克凯越</div>
		</div>
		<div class="car-text">
			<div class="text-title"><span class="car-name">别克凯越</span>10天套餐包</div>
			<div class="text-line" style="height: 70px; line-height: 30px; margin-top: 10px;">套餐包为春节连续10天，其中2月17日17:00-2月25日9:00为必须包含租赁时间段<br/>过期失效</div>
			<div class="text-line">本套餐不包含里程费及违约保证金</div>
			<div class="text-line">里程费：按实际里程统计</div>
			<div class="text-line">违约保证金：1500元（还车后无问题35天后可退回）</div>
		</div>
		
<!-- 		<div class="car-outelets-con"> -->
<!-- 			<div class="car-area-div"> -->
<!-- 				<div id="car-outelets-area-icon"></div> -->
<!-- 				<span class="">区域：</span> -->
<!-- 				<ul id="car-outelets-area-text"> -->
<!-- 					<s:iterator value="#request.areas" id="item" status="i"> -->
<!-- 						<li data="${item.csaId}" class="${baseOrderInfo.csoArea==item.csaId ?'seled' :''}"> -->
<!-- 							<a href="javascript:;" style="padding-right: 13px;">${item.csaName}<i></i> </a> -->
<!-- 						</li> -->
<!-- 					</s:iterator> -->
<!-- 				</ul> -->
<!-- 			</div> -->
<!-- 		</div> -->
	</div>
	
	<div class="cardateline-text"></div>
		
	<div class="timecont">
		<div class="timebar"></div>
	</div>
	
	<%@ include file="/activity/newyear2015/activity-rule.html"%>
		
</div>
	
	
	<div id="dialogContainer" class="dialog_container">
    <div class="dialog_box">
	    <div class="dialog_con">
	        <div><a href="javascript:" id="dialogClose" class="dialog_close">X</a></div>
	        <div id="dialogBody" class="dialog_body">
		        <div id="dialogTitle" class="dialog_title">恭喜您，成功抢到！</div>
		        <div id="dialogText"  class="dialog_text">
		        	通过驾驶证认证之后可以抢套餐包
		        </div>
		        
		        <div class="dialog_line"></div>
		        
		        <div class="dialog_btn_con">
		        	<div class="button lbtn">确定</div>
		        	<div class="button rbtn">取消</div>
		        </div>
		        
	        </div>
	     </div>
    </div>
	
	<script type="text/javascript">
		 //字符串转日期格式，strDate要转为日期格式的字符串
        Date.prototype.convertDate = function (date) {   
			var flag = true;   
			var dateArray = date.split("-");  
			if (dateArray.length != 3) {  
			dateArray = date.split("/");  
			if (dateArray.length != 3) {  
			return null;  
			}  
			flag = false;  
			}  
			var newDate = new Date();  
			if (flag) {  
			// month从0开始  
			newDate.setFullYear(dateArray[0], dateArray[1] - 1, dateArray[2]);  
			}  
			else {  
			newDate.setFullYear(dateArray[2], dateArray[1] - 1, dateArray[0]);  
			}  
			newDate.setHours(0, 0, 0);  
			return newDate;  
		};  
		
		 function parseDate(strDate, strFormat){  
	       if(typeof strDate != "string"){  
	            return new Date();  
	       }  
	      var longTime = Date.parse(strDate);  
	      if(isNaN(longTime)){  
	          if(typeof strFormat === 'undefined'){  
	              this.debug('请输入日期的格式');  
	             return new Date();  
	          }  
	          var tmpDate = new Date();  
	          var regFormat = /(\w{4})|(\w{2})|(\w{1})/g;  
	          var regDate = /(\d{4})|(\d{2})|(\d{1})/g;  
	          var formats = strFormat.match(regFormat);  
	          var dates = strDate.match(regDate);  
	          if(typeof formats !== 'undefined' && typeof dates !== 'undefined' && formats.length == dates.length){  
	            for(var i = 0; i < formats.length; i++){  
	              var format = formats[i];  
	              if(format === "yyyy"){  
	                tmpDate.setFullYear(parseInt(dates[i], 10));  
	              }else if(format == "yy"){  
	                var prefix = (tmpDate.getFullYear() + "").substring(0, 2);  
	                var year = (parseInt(dates[i], 10) + "").length == 4? parseInt(dates[i], 10): prefix + (parseInt(dates[i], 10) + "00").substring(0, 2);  
	                var tmpYear = parseInt(year, 10);  
	                tmpDate.setFullYear(tmpYear);  
	              }else if(format == "MM" || format == "M"){  
	                tmpDate.setMonth(parseInt(dates[i], 10) - 1);  
	              }else if(format == "dd" || format == "d"){  
	                tmpDate.setDate(parseInt(dates[i], 10));  
	              }else if(format == "HH" || format == "H"){  
	                tmpDate.setHours(parseInt(dates[i], 10));  
	              }else if(format == "mm" || format == "m"){  
	                tmpDate.setMinutes(parseInt(dates[i], 10));  
	              }else if(format == "ss" || format == "s"){  
	                tmpDate.setSeconds(parseInt(dates[i], 10));  
	              }  
	            }  
	           return tmpDate;  
	         }  
	          return tmpDate;  
	        }else{  
	          return new Date(longTime);  
	        }  
	    }
        
		function countDown(val){
			//"${oddtime}"
			//var end_time = time.getTime(),	//月份是实际月份-1
			//current_time = new Date().getTime(),
			var time = parseInt(val);
			sys_second = time/1000;
			var day = Math.floor((sys_second / 3600) / 24);
			var hour = Math.floor((sys_second / 3600) % 24);
			var minute = Math.floor((sys_second / 60) % 60);
			var second = Math.floor(sys_second % 60);

			var str =  (day<10?"0"+day:day);
			str += ':'+(hour<10?"0"+hour:hour); 	//计算小时
			str += ':'+(minute<10?"0"+minute:minute);//计算分
			str += ':'+(second<10?"0"+second:second);// 计算秒
			return str;
		}
		
		$(document).ready(function() {
		
			//=============初始化弹窗组件=============

			var window_close = function(){
				$("#dialogContainer").hide();
			};
			
			var window_show = function(){
				$("#dialogContainer").show();
			};
			
	        $("#dialogClose").bind("click", function(){
	        	window_close();
	        	$("#dialogClose").trigger("close");
	        });
	        
	        $("#dialogContainer").find(".lbtn").bind("click", function(){
        		window_close();
         		$(this).trigger("close");
         		$(this).trigger("sure");
	        });
	         
	        $("#dialogContainer").find(".rbtn").bind("click", function(){
	        	window_close();
         		$(this).trigger("close");
         		$(this).trigger("cancel");
	        });
	        
	        function showTips(title, content, closeHandler, yesText){
				$("#dialogTitle").html(title);
				$("#dialogText").html(content);
				$("#dialogContainer").find(".dialog_btn_con").css({width:"180px"});
				$("#dialogContainer").find(".rbtn").hide();
				$("#dialogContainer").show();
				if(yesText){
					$("#dialogContainer").find(".lbtn").html(yesText);
				}
				if(closeHandler){
					$("#dialogContainer").find(".lbtn").bind("close", closeHandler);
					$("#dialogClose").bind("close", closeHandler);
				}
			}
			
			function confirmTips(title, content, yesHandler, noHandler, yesText, noText, closeHandler){
				$("#dialogTitle").html(title);
				$("#dialogText").html(content);
				$("#dialogContainer").find(".dialog_btn_con").css({width:"360px"});
				$("#dialogContainer").find(".rbtn").show();
				$("#dialogContainer").show();
				yesText = yesText || "确定";
				noText = noText || "取消";
				var lbtn = $("#dialogContainer").find(".lbtn").text(yesText);
				var rbtn = $("#dialogContainer").find(".rbtn").text(noText);
				if(yesHandler){
					lbtn.bind("sure", yesHandler);
				}
				if(noHandler){
					rbtn.bind("cancel", noHandler);
				}
				if(closeHandler){
					$("#dialogClose").bind("close", closeHandler);
				}
			}
				
			function refresh(){
				location.reload(true);
			}	
			
			$(".timebar").countdown({
				image: "${basePath}images/activity/newyear2015/digits.png",
				format: "dd:hh:mm:ss",
				startTime: countDown("${remainCarTime}"),
				timerEnd:function(){
					
				}
			});
			
// 			$.getJSON("/ajax_outletsByArea.html",{area:value,t:new Date().getTime()}, function(data) {
// 	//			  遍历JSON中的每个entry 
// 				  $.each(data, function(entryIndex, entry) {
// 	//			  var info = '<option selectid="'+entry.csoId;
// 				  var info = '<li data ="'+entry.csoId;
// 				  if($('#csoOutlets').val()== entry.csoId){
// 						  info=info+'" class="seled" ><a href="javascript:;">'+entry.csoName+'<i></i></a></li>';
// 						  $("#ul-csoOutlets .all").after(info);
// 					 }else{
// 					 	 if(!entry.csoCanOrder){
// 					 	 		info=info+'" class="disabled" title="预设网点"';
// 					        	info= info+'"><a href="javascript:;">'+entry.csoName+'<i></i></a></li>';
// 					       }else{
// 								var dur =  (new Date()).getTime() -  entry.csoAddTime;				       			
// 					       		if(dur <1000 * 60 * 60 * 24*80){
// 					       			info= info+'"><a href="javascript:;">'+entry.csoName+'<i></i><span class="tag new" title="新网点"></span></a></li>';
// 					       		}else{
// 					       			info= info+'"><a href="javascript:;">'+entry.csoName+'<i></i></a></li>';
// 					       		}
// 					       }
// 					        $(info).appendTo("#ul-csoOutlets");
// 					    }
// 					 });
// 				  });
			
			<s:if test="#request.carType=='NEW_YEAR_PACK_2015_KY'">
			</s:if>
			<s:if test="#request.carType=='NEW_YEAR_PACK_2015_MG'">
				$(".car-img-cont").removeClass("img-bkky").addClass("img-mg");
				$(".car-tag").text("名爵");
				$(".car-name").text("名爵");
			</s:if>
			<s:if test="#request.carType=='NEW_YEAR_PACK_2015_SMART'">
				$(".car-img-cont").removeClass("img-bkky").addClass("img-smart");
				$(".car-tag").text("Smart");
				$(".car-name").text("Smart");
			</s:if>
			//====================================================================================
			setTimeout(function(){
				location.href = "${basePath}/activity/activity-reserve.html";
			}, parseInt("${now}"));
		});
		
	</script>
</div>